<div id="all-files" class="tab-pane data-tab" data-file-type="all" role="tabpanel">
    <div id="all-filter-panel" class="col-lg-3 col-md-3 col-sm-3">
        <div class="panel panel-default">
            <div class="panel-body">
                <label for="build">Build</label>
                <select aria-label="Build" id="all-build" class="form-control build">
                    <option value="HG38" {% if build == 'HG38' %}selected{% endif %}>HG38</option>
                    <option value="HG19" {% if build == 'HG19' %}selected{% endif %}>HG19</option>
                </select>
            </div>
        </div>
        <div class="panel filter-panel panel-default">
            {% for attr_build, vals in metadata_data_attr.items %}
            <div class="panel-body tab-content filter-build-panel" data-filter-build="{{ attr_build }}" id="all-filter-panel-{{ attr_build }}" {% if build != attr_build %}style="display: none;"{% endif %}>
                <ul class="list-group" id="metadata-data-accordian-all" role="tablist" aria-multiselectable="true">
                    {% for attr in vals %}
                        <li class="list-group-item">
                            <div id="heading-all-{{ attr_build }}-{{attr.name}}" class="list-group-item__heading">
                                <a role="button" data-toggle="collapse" data-parent="#metadata-data-accordian-all" href="#collapse-all-{{ attr_build }}-{{ attr.name }}" aria-expanded="false" aria-controls="collapse-all-{{ attr_build }}-{{ attr.name }}">
                                    <i class="fa fa-caret-right"></i><i class="fa fa-caret-down"></i> {{ attr.displ_name }}
                                </a>
                            </div>
                            <div id="collapse-all-{{ attr_build }}-{{ attr.name }}" class="list-group-item__body collapse cohort-feature-select-block" role="tabpanel" data-feature-type="donor"
                                 aria-labelledby="heading-all-{{ attr_build }}-{{ attr.name }}" data-feature-name="{{ attr.name }}" data-feature-displ-name="{{ attr.displ_name }}">
                                <ul class="search-checkbox-list" id="all-{{ attr.name }}">
                                    {% with attr.values|how_many_more:6 as num_more %}
                                        {% for v in attr.values|check_for_order:attr.name %}
                                            {% if forloop.counter0 < 6 %}
                                                <li class="checkbox">
                                                    <label title="{% if v.tooltip %}{{ v.tooltip }}{% else %} {% endif %}">
                                                        <input type="checkbox" name="elements-selected" data-value-name="{{ v.name }}" id="all-{{ attr_build }}-{{ attr.name }}-{{ v.value }}"
                                                               data-feature-name="{{ attr.name }}" data-count="{{ v.count }}">
                                                        {% if v.value == 'None' %}NA{% elif v.displ_name %}{{ v.displ_value }}{% else %}{{ v.name }}{% endif %}
                                                         <span class="count">({{ v.count }})</span>
                                                    </label>
                                                </li>
                                            {% elif forloop.counter0 == 6 and num_more > 0 %}
                                                <p class="more-checks"><a class="show-more">{{ num_more }} more</a><span class="checks"><a class="check-all">Check All</a> / <a class="uncheck-all">Uncheck All</a></span></p>
                                                <li class="extra-values checkbox" style="display:none;">
                                                    <label title="{% if v.tooltip %}{{ v.tooltip }}{% else %} {% endif %}">
                                                        <input type="checkbox" name="elements-selected" data-value-name="{{ v.name }}" id="all-{{ attr_build }}-{{ attr.name}}-{{ v.value }}"
                                                               data-feature-name="{{ attr.name }}" data-count="{{ v.count }}">
                                                        {% if v.value == 'None' %}NA{% elif v.displ_name %}{{ v.displ_name }}{% else %}{{ v.name }}{% endif %}
                                                         <span class="count">({{ v.count }})</span>
                                                    </label>
                                                </li>
                                            {% else %}
                                                <li class="extra-values checkbox" style="display:none;">
                                                    <label title="{% if v.tooltip %}{{ v.tooltip }}{% else %} {% endif %}">
                                                        <input type="checkbox" name="elements-selected" data-value-name="{{ v.name }}" id="all-{{ attr_build }}-{{ attr.name }}-{{ v.value }}"
                                                               data-feature-name="{{ attr.name }}" data-count="{{ v.count }}">
                                                        {% if v.value == 'None' %}NA{% elif v.displ_name %}{{ v.displ_name }}{% else %}{{ v.name }}{% endif %}
                                                         <span class="count">({{ v.count }})</span>
                                                    </label>
                                                </li>
                                            {% endif %}
                                        {% endfor %}
                                        {% if num_more > 0 %}
                                            <p class="less-checks" style="display: none;"><a class="show-less">less</a><span class="checks"><a class="check-all">Check All</a> / <a class="uncheck-all">Uncheck All</a></span></p>
                                        {% endif %}
                                    {% endwith %}
                                </ul>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            {% endfor %}
        </div>
    </div>
    <div id="all-file-panel" class="col-lg-9 col-md-9 col-sm-9">
        <div class="filelist-panel panel">
            <div id="" class="alert alert-warning alert-dismissable file-list-warning" style="display: none;">
                <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                The maximum number of file records which can be downloaded is <span class="file-list-limit">{{ file_list_max }}</span>. Your selections currently total
                <span class="file-list-total">#</span>. If you download the list now, it will be arbitrarily cut off after the maximum. Please consider using the filter
                panel to the left to limit the record count. In order to obtain the complete listing, you can register a Google Cloud Project and BigQuery Dataset, and
                export the file record list to a BigQuery table.
            </div>
            <div class="panel-heading">
                <h4>File Listing</h4>
                <div class="page-action-group pull-right">
                    <ul>
                        <li class="menu-item">
                            <div class="filelist-obtain">
                                <span class="pending-left" id="download-in-prog" style="display: none;"><i class="fa fa-circle-o-notch fa-spin"></i>Downloading...</span>
                                <a class="download-link" href="{{ download_url }}" title="Download file manifest as CSV"><button class="btn btn-info download-btn">CSV</button></a>{# <a id="download-link" href="{{ download_url }}" title="Download file manifest as JSON"><button class="btn btn-info">JSON</button></a>#}
                                <input type="hidden" class="download-token" value="" />
                            </div>
                        </li>
                        <li class="menu-item">
                            <div class="filelist-obtain">
                                <button class="btn btn-info export-btn" data-toggle="modal" data-target="#export-to-bq-modal" title="Export this file manifest to a BigQuery table">BigQuery</button>
                                <button class="btn btn-info export-btn" data-toggle="modal" data-target="#export-to-gcs-modal" title="Export this file manifest to a GCS bucket">GCS</button>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="panel-body">
                <div class="dataTables_info">
                    <span class="file-page-count">Showing <span class="showing">25</span> of <span class="total-file-count"></span> entries</span>
                    <span class="no-file-page-count" style="display: none;">Showing 0 files.</span>
                    <span class="spinner"><i class="fa fa-spin fa-spinner hidden"></i></span>
                </div>
                <div>
                    <div class="dataTables_length files-per-page"><label>Show</label>
                        <select>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                        <label>entries</label>
                    </div>
                    <div class="dataTables_paginate">
                        <a class="prev-page paginate_button disabled">Previous</a>
                        <span class="paginate_button_space"/>
                        <a class="next-page paginate_button">Next</a>
                    </div>
                </div>
                <table class="table table-striped file-list-table" aria-label="File Listing Table">
                    <thead>
                        <tr>
                            <th class="col-program">Program</th>
                            <th class="col-barcode">Case Barcode</th>
                            <th class="col-filename">File Name</th>
                            <th class="col-diseasecode">Disease Code</th>
                            <th class="col-exp-strategy">Exp. Strategy</th>
                            <th class="col-platform">Platform</th>
                            <th class="col-datacat">Data Category</th>
                            <th class="col-datatype">Data Type</th>
                            <th class="col-dataformat">Data Format</th>
                        </tr>
                    </thead>
                    <colgroup>
                        <col style="width: 7%">
                        <col style="width: 12%">
                        <col style="width: 25%">
                        <col style="width: 7%">
                        <col style="width: 9%">
                        <col style="width: 9%">
                        <col style="width: 13%">
                        <col style="width: 11%">
                        <col style="width: 6%">
                    </colgroup>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var total_files = {{ total_file_count|safe }};
    var file_listing = {{ file_list|tojson|safe }};
</script>
